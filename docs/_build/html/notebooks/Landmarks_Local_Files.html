
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Landmarks (using Local Files) &#8212; cityImage 1.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=61243dd2"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/Landmarks_Local_Files';</script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cleaning the graph" href="NetworkCleaning.html" />
    <link rel="prev" title="Barriers" href="Barriers.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">cityImage 1.2 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../index.html">
                        Home
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="userGuide.html">
                        userGuide
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/cityImage" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/gfilo" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../index.html">
                        Home
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="userGuide.html">
                        userGuide
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/cityImage" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/gfilo" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Nodes_Paths_fromOSM.html">Nodes and Paths from OpenStreetMap Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="Nodes_Paths_Local_Files.html">Nodes and Paths from Local Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Districts.html">Districts</a></li>
<li class="toctree-l1"><a class="reference internal" href="Barriers.html">Barriers</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Landmarks from Local Files</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Landmarks from OpenStreetMap Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="NetworkCleaning.html">Appendix: Street Network Cleaning</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="userGuide.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Landmarks...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Landmarks-(using-Local-Files)">
<h1>Landmarks (using Local Files)<a class="headerlink" href="#Landmarks-(using-Local-Files)" title="Link to this heading">#</a></h1>
<p>Four scores are here computed to extract computation landmarks: structural, visual, cultural, pragmatic. The user has to provide at least an attribute shapefile containing the height attribute (the only mandatory field). See below for further instructions on the data sources.</p>
<p>The user can also provide, seaprately, information about cultural/historical landmarks (e.g. position of listed important buildings); see <em>3 - Cultural component</em></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="o">,</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span><span class="o">,</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span><span class="o">,</span> <span class="nn">osmnx</span> <span class="k">as</span> <span class="nn">ox</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">LineString</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:20.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span> <span class="o">=</span> <span class="kc">None</span>

<span class="kn">import</span> <span class="nn">cityImage</span> <span class="k">as</span> <span class="nn">ci</span>
</pre></div>
</div>
</div>
<section id="Loading-the-Layers">
<h2>Loading the Layers<a class="headerlink" href="#Loading-the-Layers" title="Link to this heading">#</a></h2>
<p>Proive the input path where the building layer of the city/area of interest is stored. This file shouldn’t be exactly one’s case-study area but a larger area (e.g. not Boston’s city centre (case-study area), but the entire city of Boston).</p>
<p>Landmarks are extracted from buildings that are within the chosen case-study area (<code class="docutils literal notranslate"><span class="pre">buildings</span></code> geodataframe). Other buildings around the case study area have to be included in the analysis in order to correctly compute the landmark measures, namely, to avoid that buildings located along the boundaries of the case-study area benefit from the fact that in the <code class="docutils literal notranslate"><span class="pre">buildings</span></code> geodataframe outer buildings are not included.</p>
<p>In other words, <code class="docutils literal notranslate"><span class="pre">buildings</span></code> is a subset of <code class="docutils literal notranslate"><span class="pre">obstructions</span></code>.</p>
<p>One can set <code class="docutils literal notranslate"><span class="pre">option</span></code> to: * <code class="docutils literal notranslate"><span class="pre">1</span></code> - Load one’s <code class="docutils literal notranslate"><span class="pre">buildings</span></code> and <code class="docutils literal notranslate"><span class="pre">obstructions</span></code> gdfs from a local path. Choose when: Files are ready and contains the <code class="docutils literal notranslate"><span class="pre">height</span></code>, and a <code class="docutils literal notranslate"><span class="pre">land_use</span></code> fields.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> - Get a large set of building from OSM (<code class="docutils literal notranslate"><span class="pre">obstructions</span></code>), extract the <code class="docutils literal notranslate"><span class="pre">buildings</span></code>, and attach information regarding <code class="docutils literal notranslate"><span class="pre">height</span></code> and <code class="docutils literal notranslate"><span class="pre">land_use</span></code> use from an existing file that it is in one’s possession (if this file is for example issued by an official data source and therefore more complete than OSM). This step makes sense only if one’s not comfortable with the shapes of the building footprints in their possession. Often these files contain footprints too precise and not fitting the
purposes of this work. Instead, OSM provides already simplified footprints. Choose when: Having a shapefile with the <code class="docutils literal notranslate"><span class="pre">height</span></code> and <code class="docutils literal notranslate"><span class="pre">land_use</span></code> attributes but it is preferred to use the more simplified OSM geometries and attach the attributes to the OSM footprints.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> - Load a buildings dataframe that would correspond to <code class="docutils literal notranslate"><span class="pre">obstructions</span></code> and obtain the <code class="docutils literal notranslate"><span class="pre">buildings</span></code> geodataframe by using a certain distance or a case-study area polygon (see below for details). Choose when: Having a shapefile containing buildings in a large area, including and outside one’s case study area; one is comfortable with the geometries and the <code class="docutils literal notranslate"><span class="pre">height</span></code> and <code class="docutils literal notranslate"><span class="pre">land_use</span></code> attributes are contained in such a file.</p></li>
</ul>
<p>Buildings smaller than 200 square meters are kept out of the analysis, as well as buildings whose height is lower than 1mt (when the <code class="docutils literal notranslate"><span class="pre">height</span></code> field is filled).</p>
<p>In general, the obstructions geodataframe should include buildings located around 1000 m away from the boundary of the buildings gdf. This may vary, of course, on the basis of the analysis that one intends to conduct.</p>
<p><strong>Ininitialising path, names, etc.</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">city_name</span> <span class="o">=</span> <span class="s1">&#39;Boston&#39;</span>
<span class="n">epsg</span> <span class="o">=</span> <span class="mi">26986</span>
<span class="n">crs</span> <span class="o">=</span> <span class="s1">&#39;EPSG:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">epsg</span><span class="p">)</span>
<span class="n">input_path</span> <span class="o">=</span> <span class="s1">&#39;../data/&#39;</span><span class="o">+</span><span class="n">city_name</span>
<span class="n">option</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># from local</span>
<span class="n">case_study_area</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">input_path</span><span class="o">+</span><span class="s1">&#39;_city_center.shp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geometry</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#specify the land use field&#39;s name in the file</span>
<span class="n">height_field</span> <span class="o">=</span> <span class="s1">&#39;height&#39;</span>
<span class="n">base_field</span> <span class="o">=</span> <span class="s1">&#39;base&#39;</span>
<span class="n">land_use_field</span> <span class="o">=</span> <span class="s1">&#39;landUse&#39;</span>
</pre></div>
</div>
</div>
</section>
<section id="Defining-the-Layers">
<h2>Defining the Layers<a class="headerlink" href="#Defining-the-Layers" title="Link to this heading">#</a></h2>
<section id="Option-1">
<h3>Option 1<a class="headerlink" href="#Option-1" title="Link to this heading">#</a></h3>
<p>Using already prepared <code class="docutils literal notranslate"><span class="pre">buildings</span></code> and <code class="docutils literal notranslate"><span class="pre">obstructions</span></code> datasets. One should be aware that <code class="docutils literal notranslate"><span class="pre">buildings</span></code> should be a perfect subset of <code class="docutils literal notranslate"><span class="pre">obstructions</span></code>. This means that all the buildings in <code class="docutils literal notranslate"><span class="pre">buildings</span></code> should be in <code class="docutils literal notranslate"><span class="pre">obstructions</span></code>, sharing the same attributes.</p>
<ul class="simple">
<li><p>The datasets should contain fields named <code class="docutils literal notranslate"><span class="pre">base</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code>, representing the base height of the building (could be set to 0) and the height of the building.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">buildingID</span></code> should be already set correctly, that is, matching in the <code class="docutils literal notranslate"><span class="pre">obstructions</span></code>and <code class="docutils literal notranslate"><span class="pre">buildings</span></code> GeoDataFrames.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">buildings</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">input_path</span><span class="o">+</span><span class="s1">&#39;_buildings.shp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>
    <span class="n">obstructions</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">input_path</span><span class="o">+</span><span class="s1">&#39;_obstructions.shp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>
    <span class="n">buildings</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">obstructions</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">buildingID</span><span class="p">,</span> <span class="n">obstructions</span><span class="o">.</span><span class="n">buildingID</span>
    <span class="n">buildings</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">obstructions</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
    <span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;land_use_raw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="n">land_use_field</span><span class="p">]</span>
    <span class="n">obsutrctions</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">land_use_field</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Option-2">
<h3>Option 2<a class="headerlink" href="#Option-2" title="Link to this heading">#</a></h3>
<p>Here one would download the obstructions from OpenStreetMap using a large metropolotin area of one’s case-study area. One has also the chance to attach attributes from a file in their possession and simplify the footprints. The <code class="docutils literal notranslate"><span class="pre">buildings</span></code> GeoDataFrame is than obtained by using an OSM polygon representing the actual case-study area (and, in case, a buffer around it).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">place</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">obstructions_tmp</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">get_buildings_fromOSM</span><span class="p">(</span><span class="n">place</span><span class="p">,</span> <span class="s1">&#39;OSMplace&#39;</span><span class="p">,</span> <span class="n">epsg</span> <span class="o">=</span> <span class="n">epsg</span><span class="p">,</span> <span class="n">distance</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">obstructions_tmp</span> <span class="o">=</span> <span class="n">obstructions_tmp</span><span class="p">[</span><span class="n">obstructions_tmp</span><span class="o">.</span><span class="n">area</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>

    <span class="c1">## simplify geometries?</span>
    <span class="k">if</span> <span class="n">simplify</span><span class="p">:</span>
        <span class="n">obstructions_tmp</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">simplify_footprints</span><span class="p">(</span><span class="n">obstructions_tmp</span><span class="p">,</span> <span class="n">crs</span><span class="p">)</span>
        <span class="n">obstructions_tmp</span><span class="p">[</span><span class="s1">&#39;base&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c1"># attach attributes from..</span>
    <span class="n">attribute_file</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">input_path</span><span class="o">+</span><span class="s1">&#39;_buildings_obstructions.shp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>

    <span class="c1"># provide the name of the height, base_height, and land use attributes in your file</span>
    <span class="n">obstructions</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">attach_attributes</span><span class="p">(</span><span class="n">obstructions_na</span><span class="p">,</span> <span class="n">attribute_file</span><span class="p">,</span> <span class="n">height_field</span> <span class="o">=</span> <span class="n">height_field</span><span class="p">,</span>
                                        <span class="n">base_field</span> <span class="o">=</span> <span class="n">base_field</span><span class="p">,</span>
                                        <span class="n">lan_use_field</span> <span class="o">=</span> <span class="n">lan_use_field</span><span class="p">)</span>

    <span class="c1"># getting the polygon</span>
    <span class="n">case_study_area</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">geocode_to_gdf</span><span class="p">(</span><span class="s1">&#39;Muenster Mitte&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geometry</span>

    <span class="n">buildings</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="n">obstructions</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">case_study_area</span><span class="p">)]</span>
    <span class="n">buildings</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">buildingID</span>
    <span class="n">buildings</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</section>
<section id="Option-3">
<h3>Option 3<a class="headerlink" href="#Option-3" title="Link to this heading">#</a></h3>
<p>If one doesn’t have a precise case-study area polygon to pass: Use the parameter <code class="docutils literal notranslate"><span class="pre">distance_from_center</span></code> to indicate till how far away from the center of the case-study area one wants to include buildings. When the user doesn’t provide the case-study area polygon nor the distance parameter, <code class="docutils literal notranslate"><span class="pre">buildings</span></code> and <code class="docutils literal notranslate"><span class="pre">obstructions</span></code> overlap; they have the same extent as the original input file.</p>
<p><code class="docutils literal notranslate"><span class="pre">height_field</span></code> and <code class="docutils literal notranslate"><span class="pre">base_field</span></code> should indicate the maximum and the base elevations attributes of the buildings, in the original .shp file. When <code class="docutils literal notranslate"><span class="pre">base_field</span></code> is not provided, <code class="docutils literal notranslate"><span class="pre">base</span></code> is automatically set to 0. <code class="docutils literal notranslate"><span class="pre">height_field</span></code> is necessary to perform the landmark extraction. If such a feature is not at disposal, one should set <code class="docutils literal notranslate"><span class="pre">height_field</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="n">buildings</span><span class="p">,</span> <span class="n">obstructions</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">get_buildings_fromFile</span><span class="p">(</span><span class="n">input_path</span><span class="o">+</span><span class="s1">&#39;_obstructions.shp&#39;</span><span class="p">,</span> <span class="n">epsg</span><span class="p">,</span>
                                                       <span class="n">case_study_area</span> <span class="o">=</span> <span class="n">case_study_area</span><span class="p">,</span> <span class="n">distance_from_center</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                                       <span class="n">height_field</span> <span class="o">=</span> <span class="n">height_field</span><span class="p">,</span> <span class="n">base_field</span> <span class="o">=</span> <span class="n">base_field</span><span class="p">,</span>
                                                       <span class="n">land_use_field</span> <span class="o">=</span> <span class="n">land_use_field</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Optional readjustments</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obstructions</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="n">obstructions</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">convex_hull</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mi">1000</span><span class="p">))]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;land_use_raw&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;Residential Condo Unit&#39;, &#39;Commercial Condo Unit&#39;, &#39;Commercial&#39;,
       &#39;Commercial Land&#39;, &#39;residential&#39;, &#39;Exempt&#39;, &#39;restaurant&#39;,
       &#39;Apartments 7 Units above&#39;, None, &#39;Mixed Use Res/Comm&#39;,
       &#39;Exempt 121A&#39;, &#39;commercial&#39;, &#39;Apartments 4-6 Units&#39;, &#39;Industrial&#39;,
       &#39;Residential Three Family&#39;, &#39;industrial&#39;, &#39;apartments&#39;,
       &#39;university&#39;, &#39;bicycle_parking&#39;, &#39;dormitory&#39;, &#39;education&#39;,
       &#39;government&#39;, &#39;school&#39;, &#39;office&#39;, &#39;boathouse&#39;, &#39;hotel&#39;, &#39;parking&#39;,
       &#39;retail&#39;, &#39;Condominium Master&#39;, &#39;house&#39;, &#39;service&#39;, &#39;construction&#39;,
       &#39;college&#39;, &#39;terrace&#39;, &#39;Condominium Parking&#39;, &#39;shelter&#39;, &#39;church&#39;,
       &#39;hospital&#39;, &#39;roof&#39;, &#39;emergency_service&#39;, &#39;garages&#39;, &#39;garage&#39;,
       &#39;Residential Land&#39;], dtype=object)
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">land_use_to_disregard</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;stockroom, warehouse&#39;</span><span class="p">,</span> <span class="s1">&#39;garage&#39;</span><span class="p">,</span> <span class="s1">&#39;stable&#39;</span><span class="p">,</span> <span class="s1">&#39;workshop&#39;</span><span class="p">,</span><span class="s1">&#39;converter&#39;</span><span class="p">,</span> <span class="s1">&#39; pumping station&#39;</span><span class="p">,</span> <span class="s1">&#39;barracks&#39;</span><span class="p">,</span> <span class="s1">&#39;barn&#39;</span>
       <span class="s1">&#39;greenhouse&#39;</span><span class="p">,</span> <span class="s1">&#39;shed&#39;</span><span class="p">,</span><span class="s1">&#39;greenhouse (botany)&#39;</span><span class="p">,</span> <span class="s1">&#39;bunker, shelter&#39;</span><span class="p">,</span><span class="s1">&#39;heating plant&#39;</span><span class="p">,</span> <span class="s1">&#39;parking, garage&#39;</span><span class="p">,</span>
               <span class="s1">&#39;electricity substation&#39;</span><span class="p">]</span>
<span class="n">obstructions</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">obstructions</span><span class="o">.</span><span class="n">land_use_raw</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">land_use_to_disregard</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">obstructions</span><span class="o">.</span><span class="n">area</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="p">))]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obstructions</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="o">~</span><span class="p">((</span><span class="n">obstructions</span><span class="o">.</span><span class="n">land_use_raw</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">obstructions</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">isnull</span><span class="p">()))]</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="o">~</span><span class="n">obstructions</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">isnull</span><span class="p">()]</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
<span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">buildings</span><span class="p">[</span><span class="n">buildings</span><span class="o">.</span><span class="n">buildingID</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">obstructions</span><span class="o">.</span><span class="n">buildingID</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<p><strong>Visualisation</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">plot_gdf</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">scheme</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="n">black_background</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
                  <span class="n">title</span> <span class="o">=</span> <span class="n">city_name</span><span class="o">+</span><span class="s1">&#39;: Buildings vs Obstructions&#39;</span><span class="p">,</span> <span class="n">base_map_gdf</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">,</span> <span class="n">base_map_color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>
                  <span class="n">base_map_alpha</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Landmarks_Local_Files_19_0.png" src="../_images/notebooks_Landmarks_Local_Files_19_0.png" />
</div>
</div>
</section>
</section>
<section id="Structural-component">
<h2>Structural component<a class="headerlink" href="#Structural-component" title="Link to this heading">#</a></h2>
<p>It considers: * The area of the building. * Its distance from the road. * The number of adjacent buildings, within the given <code class="docutils literal notranslate"><span class="pre">neighbours_radius</span></code>, around it. * A measure of 2d advance visibility, expanded till a maximum distance from the center of the building on the basis of the <code class="docutils literal notranslate"><span class="pre">advance_vis_expansion_distance</span></code> parameter.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># including outputs from previous notebooks</span>
<span class="n">output_path</span> <span class="o">=</span> <span class="s1">&#39;../output/&#39;</span><span class="o">+</span><span class="n">city_name</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># reading the street network and passing it in the function to compute the structural score</span>
<span class="n">edges</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">output_path</span><span class="o">+</span><span class="s1">&#39;_edges.gpkg&#39;</span><span class="p">)</span>

<span class="c1"># The &#39;buffer&#39; parameter indicates distance within the algorithms look for neighbouring buildings</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">structural_score</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">obstructions</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">advance_vis_expansion_distance</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
                                <span class="n">neighbours_radius</span> <span class="o">=</span> <span class="mi">150</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Visual-component">
<h2>Visual component<a class="headerlink" href="#Visual-component" title="Link to this heading">#</a></h2>
<section id="Sight-Lines-Construction">
<h3>Sight Lines Construction<a class="headerlink" href="#Sight-Lines-Construction" title="Link to this heading">#</a></h3>
<p>This is a computationally expensive step that may takes hours (in particular the intervisibility check that verifies whether the sigh lines are actually visible or not). One way to reduce it is to cluster nodes and therefore generate a lower number of sight lines. The function takes two parameters, besides the observer and the targets GeoDataFrames: * <code class="docutils literal notranslate"><span class="pre">distance_along</span></code>: It regulates the interval along the exterior of each building for which a point is identified and used as a target point. If
the exterior of the building is shorter than the parameter, at least one point is identified. * <code class="docutils literal notranslate"><span class="pre">distance_min_observer_target</span></code>: The function only computes sight lines for nodes and buildings whose distance is higher than this parameter.</p>
<p><strong>One can choose between two methods to compute the 3dvis score:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">combined</span></code> –&gt; It computes a combined score that takes into account, per each building: * The number of sight lines towards it. * Their average length. * The maximum lenght amongst them.</p>
<p><code class="docutils literal notranslate"><span class="pre">longest</span></code> –&gt; It just uses the longest sight line’s length as a score</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nodes</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">output_path</span><span class="o">+</span><span class="s1">&#39;_nodes.gpkg&#39;</span><span class="p">)</span>
<span class="n">sight_lines</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">compute_3d_sight_lines</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">buildings</span><span class="p">,</span> <span class="n">distance_along</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span> <span class="n">distance_min_observer_target</span> <span class="o">=</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">buildings</span><span class="p">,</span> <span class="n">sight_lines</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">visibility_score</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">sight_lines</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;longest&#39;</span><span class="p">)</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>height</th>
      <th>base</th>
      <th>geometry</th>
      <th>area</th>
      <th>land_use_raw</th>
      <th>buildingID</th>
      <th>road</th>
      <th>2dvis</th>
      <th>neigh</th>
      <th>fac</th>
      <th>3dvis</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23.53</td>
      <td>1.72</td>
      <td>POLYGON ((237109.750 901488.558, 237000.835 90...</td>
      <td>2466.09</td>
      <td>Commercial Condo Unit</td>
      <td>553</td>
      <td>17.99</td>
      <td>89352.63</td>
      <td>20</td>
      <td>1282.19</td>
      <td>0.57</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11.75</td>
      <td>-1.29</td>
      <td>POLYGON ((237027.023 901476.820, 237001.853 90...</td>
      <td>526.52</td>
      <td>Commercial</td>
      <td>554</td>
      <td>17.84</td>
      <td>38375.87</td>
      <td>17</td>
      <td>325.96</td>
      <td>0.36</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7.21</td>
      <td>-0.38</td>
      <td>POLYGON ((237044.307 901416.818, 237004.172 90...</td>
      <td>292.29</td>
      <td>Commercial Land</td>
      <td>555</td>
      <td>4.45</td>
      <td>41101.49</td>
      <td>16</td>
      <td>171.90</td>
      <td>0.37</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20.49</td>
      <td>1.39</td>
      <td>POLYGON ((237142.368 901348.946, 237005.398 90...</td>
      <td>2620.96</td>
      <td>Residential Condo Unit</td>
      <td>556</td>
      <td>4.11</td>
      <td>128536.86</td>
      <td>15</td>
      <td>1488.76</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12.17</td>
      <td>1.15</td>
      <td>POLYGON ((237199.594 901363.430, 237197.299 90...</td>
      <td>793.82</td>
      <td>Commercial</td>
      <td>557</td>
      <td>27.32</td>
      <td>183974.08</td>
      <td>7</td>
      <td>382.03</td>
      <td>0.54</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">plot_gdf</span><span class="p">(</span><span class="n">sight_lines</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.07</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">base_map_gdf</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">,</span> <span class="n">base_map_color</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
            <span class="n">geometry_size</span> <span class="o">=</span> <span class="mf">0.08</span><span class="p">,</span> <span class="n">base_map_alpha</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Landmarks_Local_Files_27_0.png" src="../_images/notebooks_Landmarks_Local_Files_27_0.png" />
</div>
</div>
</section>
</section>
<section id="Cultural-component">
<h2>Cultural component<a class="headerlink" href="#Cultural-component" title="Link to this heading">#</a></h2>
<p>It measures the symbolic/cultural value of each building. <em>This part is case-study specific, see other examples for generalizable methods</em></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cultural_elements</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;../data/otherSources/&#39;</span><span class="o">+</span><span class="n">city_name</span><span class="o">+</span><span class="s1">&#39;_historic_landmarks.shp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="n">epsg</span><span class="p">)</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">cultural_score</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">cultural_elements</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Pragmatic-component">
<h2>Pragmatic component<a class="headerlink" href="#Pragmatic-component" title="Link to this heading">#</a></h2>
<p>Before computing the pragmatic score, the <code class="docutils literal notranslate"><span class="pre">land_use_raw</span></code> raw field is categorised into more granular categories. One can fill in the following categories to accomodate descriptors not accounted for. Run the 1st and the 2nd cells below so to check which descriptors in <code class="docutils literal notranslate"><span class="pre">land_use_raw</span></code> are not inclued at the moment in the macro categories.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># introducing classifications and possible entries</span>

<span class="n">adult_entertainment</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;brothel&#39;</span><span class="p">,</span><span class="s1">&#39;casino&#39;</span><span class="p">,</span> <span class="s1">&#39;swingerclub&#39;</span><span class="p">,</span> <span class="s1">&#39;stripclub&#39;</span><span class="p">,</span> <span class="s1">&#39;nightclub&#39;</span><span class="p">,</span> <span class="s1">&#39;gambling&#39;</span><span class="p">]</span>

<span class="n">agriculture</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;shed&#39;</span><span class="p">,</span> <span class="s1">&#39;silo&#39;</span><span class="p">,</span> <span class="s1">&#39;greenhouse&#39;</span><span class="p">,</span> <span class="s1">&#39;stable&#39;</span><span class="p">,</span> <span class="s1">&#39;agricultural and forestry&#39;</span><span class="p">,</span>  <span class="s1">&#39;greenhouse (botany)&#39;</span><span class="p">,</span>
               <span class="s1">&#39;building in the botanical garden&#39;</span><span class="p">]</span>

<span class="n">attractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;attractions&#39;</span><span class="p">,</span>   <span class="s1">&#39;attraction&#39;</span><span class="p">,</span><span class="s1">&#39;aquarium&#39;</span><span class="p">,</span> <span class="s1">&#39;monument&#39;</span><span class="p">,</span>  <span class="s1">&#39;gatehouse&#39;</span><span class="p">,</span> <span class="s1">&#39;terrace&#39;</span><span class="p">,</span> <span class="s1">&#39;tower&#39;</span><span class="p">,</span> <span class="s1">&#39;attraction and leisure&#39;</span><span class="p">,</span>
               <span class="s1">&#39;information&#39;</span><span class="p">,</span> <span class="s1">&#39;viewpoint&#39;</span><span class="p">,</span> <span class="s1">&#39;tourist information center&#39;</span><span class="p">,</span> <span class="s1">&#39;recreation and amusement park&#39;</span><span class="p">,</span>  <span class="s1">&#39;zoo&#39;</span><span class="p">,</span>
               <span class="s1">&#39;exhibition hall, trade hall&#39;</span><span class="p">,</span> <span class="s1">&#39;boathouse&#39;</span><span class="p">,</span> <span class="s1">&#39;bath house, thermal baths&#39;</span><span class="p">,</span> <span class="s1">&#39;entertainment hall&#39;</span><span class="p">,</span> <span class="s1">&#39;sauna&#39;</span><span class="p">]</span>

<span class="n">business_services</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bank&#39;</span><span class="p">,</span> <span class="s1">&#39;service&#39;</span><span class="p">,</span><span class="s1">&#39;offices&#39;</span><span class="p">,</span> <span class="s1">&#39;foundation&#39;</span><span class="p">,</span> <span class="s1">&#39;office&#39;</span><span class="p">,</span> <span class="s1">&#39;atm&#39;</span><span class="p">,</span> <span class="s1">&#39;bureau_de_change&#39;</span><span class="p">,</span> <span class="s1">&#39;post_office&#39;</span><span class="p">,</span>
              <span class="s1">&#39;post_office;atm&#39;</span><span class="p">,</span> <span class="s1">&#39;coworking_space&#39;</span><span class="p">,</span> <span class="s1">&#39;conference_centre&#39;</span><span class="p">,</span>  <span class="s1">&#39;trade and services&#39;</span><span class="p">,</span> <span class="s1">&#39;trade and services building&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;customs office&#39;</span><span class="p">,</span> <span class="s1">&#39;insurance&#39;</span><span class="p">,</span> <span class="s1">&#39;tax_office&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;administrative building&#39;</span><span class="p">,</span>  <span class="s1">&#39;facility building&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;residential building with trade and services&#39;</span><span class="p">,</span> <span class="s1">&#39;data_center&#39;</span><span class="p">,</span> <span class="s1">&#39;tax office&#39;</span><span class="p">]</span>

<span class="n">commercial</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;commercial&#39;</span><span class="p">,</span>  <span class="s1">&#39;retail&#39;</span><span class="p">,</span> <span class="s1">&#39;pharmacy&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial;educa&#39;</span><span class="p">,</span> <span class="s1">&#39;shop&#39;</span><span class="p">,</span> <span class="s1">&#39;supermarket&#39;</span><span class="p">,</span> <span class="s1">&#39;books&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial services&#39;</span><span class="p">,</span>
              <span class="s1">&#39;commercial land&#39;</span><span class="p">,</span> <span class="s1">&#39;car_wash&#39;</span><span class="p">,</span> <span class="s1">&#39;internet_cafe&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_school&#39;</span><span class="p">,</span> <span class="s1">&#39;marketplace&#39;</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">,</span> <span class="s1">&#39;car_sharing&#39;</span><span class="p">,</span>
              <span class="s1">&#39;commercial and industry buidling&#39;</span><span class="p">,</span>  <span class="s1">&#39;crematorium&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial building&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial and industry building&#39;</span><span class="p">,</span>
              <span class="s1">&#39;commercial building to traffic facilities (general)&#39;</span><span class="p">,</span> <span class="s1">&#39;funeral parlor&#39;</span><span class="p">,</span> <span class="s1">&#39;gas station&#39;</span><span class="p">,</span> <span class="s1">&#39;car wash&#39;</span><span class="p">,</span>
              <span class="s1">&#39;pumping station&#39;</span><span class="p">,</span><span class="s1">&#39;boat_rental&#39;</span><span class="p">,</span> <span class="s1">&#39;boat_sharing&#39;</span><span class="p">,</span>  <span class="s1">&#39;bicycle_rental&#39;</span><span class="p">,</span> <span class="s1">&#39;car_rental&#39;</span><span class="p">,</span> <span class="s1">&#39;dive_centre&#39;</span><span class="p">]</span>

<span class="n">culture</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;club_house&#39;</span><span class="p">,</span><span class="s1">&#39;gallery&#39;</span><span class="p">,</span> <span class="s1">&#39;arts_centre&#39;</span><span class="p">,</span><span class="s1">&#39;cultural facility&#39;</span><span class="p">,</span> <span class="s1">&#39;cultural_centre&#39;</span><span class="p">,</span> <span class="s1">&#39;theatre&#39;</span><span class="p">,</span> <span class="s1">&#39;cinema&#39;</span><span class="p">,</span> <span class="s1">&#39;studio&#39;</span><span class="p">,</span>
            <span class="s1">&#39;exhibition_centre&#39;</span><span class="p">,</span> <span class="s1">&#39;music_school&#39;</span><span class="p">,</span> <span class="s1">&#39;theater&#39;</span><span class="p">,</span><span class="s1">&#39;castle&#39;</span><span class="p">,</span> <span class="s1">&#39;museum&#39;</span><span class="p">,</span> <span class="s1">&#39;culture&#39;</span><span class="p">]</span>

<span class="n">eating_drinking</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bbq&#39;</span><span class="p">,</span> <span class="s1">&#39;restaurant&#39;</span><span class="p">,</span> <span class="s1">&#39;fast_food&#39;</span><span class="p">,</span> <span class="s1">&#39;cafe&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>  <span class="s1">&#39;pub&#39;</span><span class="p">,</span> <span class="s1">&#39;accommodation, eating and drinking&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;ice_cream&#39;</span><span class="p">,</span> <span class="s1">&#39;kitchen&#39;</span><span class="p">,</span> <span class="s1">&#39;food_court&#39;</span><span class="p">,</span> <span class="s1">&#39;cafe;restaurant&#39;</span><span class="p">,</span> <span class="s1">&#39;biergarten&#39;</span><span class="p">]</span>

<span class="n">education_research</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;university&#39;</span><span class="p">,</span> <span class="s1">&#39;research&#39;</span><span class="p">,</span> <span class="s1">&#39;university building&#39;</span><span class="p">,</span> <span class="s1">&#39;education and research&#39;</span><span class="p">,</span> <span class="s1">&#39;research_institute&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;research_institu&#39;</span><span class="p">]</span>

<span class="n">emergency_service</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;fire brigade&#39;</span><span class="p">,</span><span class="s1">&#39;fire_station&#39;</span><span class="p">,</span><span class="s1">&#39;police&#39;</span><span class="p">,</span> <span class="s1">&#39;emergency_service&#39;</span><span class="p">,</span> <span class="s1">&#39;resque_station&#39;</span><span class="p">,</span> <span class="s1">&#39;ranger_station&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;security&#39;</span><span class="p">]</span>

<span class="n">general_education</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;school&#39;</span><span class="p">,</span> <span class="s1">&#39;college&#39;</span><span class="p">,</span> <span class="s1">&#39;kindergarten&#39;</span><span class="p">,</span> <span class="s1">&#39;education&#39;</span><span class="p">,</span> <span class="s1">&#39;education and health&#39;</span><span class="p">,</span> <span class="s1">&#39;childcare&#39;</span><span class="p">,</span>
             <span class="s1">&#39;language_school&#39;</span><span class="p">,</span> <span class="s1">&#39;children home&#39;</span><span class="p">,</span>  <span class="s1">&#39;nursery&#39;</span><span class="p">,</span>  <span class="s1">&#39;general education school&#39;</span><span class="p">]</span>

<span class="n">hospitality</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;hotel&#39;</span><span class="p">,</span>  <span class="s1">&#39;hostel&#39;</span><span class="p">,</span> <span class="s1">&#39;guest_house&#39;</span><span class="p">,</span>  <span class="s1">&#39;building for accommodation&#39;</span><span class="p">,</span>  <span class="s1">&#39;hotel, motel, pension&#39;</span><span class="p">,</span>  <span class="s1">&#39;refuge&#39;</span><span class="p">]</span>

<span class="n">industrial</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;industrial&#39;</span><span class="p">,</span> <span class="s1">&#39;factory&#39;</span><span class="p">,</span> <span class="s1">&#39;construction&#39;</span><span class="p">,</span> <span class="s1">&#39;manufacturing and production&#39;</span><span class="p">,</span> <span class="s1">&#39;gasometer&#39;</span><span class="p">,</span> <span class="s1">&#39;workshop&#39;</span><span class="p">,</span>
              <span class="s1">&#39;production building&#39;</span><span class="p">,</span> <span class="s1">&#39;manufacture&#39;</span><span class="p">]</span>

<span class="n">medical_care</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hospital&#39;</span><span class="p">,</span> <span class="s1">&#39;doctors&#39;</span><span class="p">,</span> <span class="s1">&#39;dentist&#39;</span><span class="p">,</span><span class="s1">&#39;clinic&#39;</span><span class="p">,</span><span class="s1">&#39;veterinary&#39;</span><span class="p">,</span> <span class="s1">&#39;medical care&#39;</span><span class="p">,</span> <span class="s1">&#39;nursing_home&#39;</span><span class="p">,</span>
                <span class="s1">&#39;sanatorium, nursing home&#39;</span><span class="p">,</span> <span class="s1">&#39;retirement home&#39;</span><span class="p">,</span> <span class="s1">&#39;healthcare&#39;</span><span class="p">,</span> <span class="s1">&#39;mortuary&#39;</span><span class="p">]</span>

<span class="n">military_detainment</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;general aviation&#39;</span><span class="p">,</span> <span class="s1">&#39;barracks&#39;</span><span class="p">,</span>  <span class="s1">&#39;military&#39;</span><span class="p">,</span> <span class="s1">&#39;penitentiary&#39;</span><span class="p">,</span> <span class="s1">&#39;prison&#39;</span><span class="p">]</span>

<span class="n">other</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;toilets&#39;</span><span class="p">,</span> <span class="s1">&#39;picnic_site&#39;</span><span class="p">,</span><span class="s1">&#39;hut&#39;</span><span class="p">,</span> <span class="s1">&#39;storage_tank&#39;</span><span class="p">,</span> <span class="s1">&#39;canopy&#39;</span><span class="p">,</span><span class="s1">&#39;toilet&#39;</span><span class="p">,</span>  <span class="s1">&#39;bunker, shelter&#39;</span><span class="p">,</span> <span class="s1">&#39;shelter&#39;</span><span class="p">,</span><span class="s1">&#39;warehouse&#39;</span><span class="p">,</span>
         <span class="s1">&#39;converter&#39;</span><span class="p">,</span>    <span class="s1">&#39;garage&#39;</span><span class="p">,</span> <span class="s1">&#39;garages&#39;</span><span class="p">,</span><span class="s1">&#39;parking&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="s1">&#39;roof&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;exempt&#39;</span><span class="p">,</span><span class="s1">&#39;exempt 121a&#39;</span><span class="p">,</span> <span class="s1">&#39;bicycle_parking&#39;</span><span class="p">]</span>

<span class="n">public</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;townhall&#39;</span><span class="p">,</span> <span class="s1">&#39;public_building&#39;</span><span class="p">,</span>  <span class="s1">&#39;library&#39;</span><span class="p">,</span><span class="s1">&#39;civic&#39;</span><span class="p">,</span> <span class="s1">&#39;courthouse&#39;</span><span class="p">,</span> <span class="s1">&#39;public&#39;</span><span class="p">,</span> <span class="s1">&#39;embassy&#39;</span><span class="p">,</span>
          <span class="s1">&#39;public infrastructure&#39;</span><span class="p">,</span> <span class="s1">&#39;community_centre&#39;</span><span class="p">,</span> <span class="s1">&#39;court&#39;</span><span class="p">,</span>  <span class="s1">&#39;district government&#39;</span><span class="p">,</span> <span class="s1">&#39;government&#39;</span><span class="p">,</span>
          <span class="s1">&#39;residential building with public facilities&#39;</span><span class="p">]</span>

<span class="n">religious</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;church&#39;</span><span class="p">,</span> <span class="s1">&#39;place_of_worship&#39;</span><span class="p">,</span><span class="s1">&#39;convent&#39;</span><span class="p">,</span> <span class="s1">&#39;rectory&#39;</span><span class="p">,</span> <span class="s1">&#39;chapel&#39;</span><span class="p">,</span> <span class="s1">&#39;religious building&#39;</span><span class="p">,</span> <span class="s1">&#39;monastery&#39;</span><span class="p">,</span> <span class="s1">&#39;nuns home&#39;</span><span class="p">,</span>
              <span class="s1">&#39;vocational school&#39;</span><span class="p">,</span>  <span class="s1">&#39;cathedral&#39;</span><span class="p">,</span> <span class="s1">&#39;religious buildings&#39;</span><span class="p">]</span>
<span class="n">residential</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;apartments&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;NaN&#39;</span><span class="p">,</span> <span class="s1">&#39;residential&#39;</span><span class="p">,</span><span class="s1">&#39;flats&#39;</span><span class="p">,</span> <span class="s1">&#39;houses&#39;</span><span class="p">,</span> <span class="s1">&#39;building&#39;</span><span class="p">,</span> <span class="s1">&#39;residential land&#39;</span><span class="p">,</span>
               <span class="s1">&#39;residential building&#39;</span><span class="p">,</span> <span class="s1">&#39;student dorm&#39;</span><span class="p">,</span> <span class="s1">&#39;building usage mixed with living&#39;</span><span class="p">,</span> <span class="s1">&#39;house&#39;</span>
              <span class="s1">&#39;exempt&#39;</span><span class="p">,</span> <span class="s1">&#39;apartments 4-6 units&#39;</span><span class="p">,</span> <span class="s1">&#39;apartments 7 units above&#39;</span><span class="p">,</span> <span class="s1">&#39;residential condo unit&#39;</span><span class="p">,</span> <span class="s1">&#39;mixed use res/comm&#39;</span><span class="p">,</span>
             <span class="s1">&#39;residential three family&#39;</span><span class="p">,</span> <span class="s1">&#39;residential two family&#39;</span><span class="p">,</span><span class="s1">&#39;house&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial condo unit&#39;</span><span class="p">,</span> <span class="s1">&#39;condominium master&#39;</span><span class="p">,</span>
               <span class="s1">&#39;condominium parking&#39;</span><span class="p">,</span> <span class="s1">&#39;residential single family&#39;</span><span class="p">]</span>

<span class="n">social</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;social_facility&#39;</span><span class="p">,</span> <span class="s1">&#39;community_centre&#39;</span><span class="p">,</span> <span class="s1">&#39;community buidling&#39;</span><span class="p">,</span> <span class="s1">&#39;dormitory&#39;</span><span class="p">,</span> <span class="s1">&#39;social_centre&#39;</span><span class="p">,</span> <span class="s1">&#39;social serives building&#39;</span><span class="p">,</span>
         <span class="s1">&#39;social services&#39;</span><span class="p">,</span>  <span class="s1">&#39;community hall&#39;</span><span class="p">,</span>  <span class="s1">&#39;commercial social facility&#39;</span><span class="p">,</span>  <span class="s1">&#39;recreational&#39;</span><span class="p">]</span>

<span class="n">sport</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;stadium&#39;</span><span class="p">,</span> <span class="s1">&#39;sport and entertainment&#39;</span><span class="p">,</span> <span class="s1">&#39;sports or exercise facility&#39;</span><span class="p">,</span> <span class="s1">&#39;gym&#39;</span><span class="p">,</span> <span class="s1">&#39;sports building&#39;</span><span class="p">,</span> <span class="s1">&#39;sports hall&#39;</span><span class="p">,</span>
         <span class="s1">&#39;horse riding school&#39;</span><span class="p">,</span>  <span class="s1">&#39;swimming pool&#39;</span><span class="p">,</span>  <span class="s1">&#39;sport hall&#39;</span><span class="p">,</span> <span class="s1">&#39;bowling hall&#39;</span><span class="p">,</span>  <span class="s1">&#39;indoor swimming pool&#39;</span><span class="p">,</span> <span class="s1">&#39;grandstand&#39;</span><span class="p">]</span>

<span class="n">transport</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transport&#39;</span><span class="p">,</span> <span class="s1">&#39;road transport&#39;</span><span class="p">,</span> <span class="s1">&#39;station&#39;</span><span class="p">,</span> <span class="s1">&#39;subway_entrance&#39;</span><span class="p">,</span> <span class="s1">&#39;bus_station&#39;</span><span class="p">,</span> <span class="s1">&#39;shipping facility building&#39;</span><span class="p">,</span>
             <span class="s1">&#39;train_station&#39;</span><span class="p">,</span>  <span class="s1">&#39;railway building&#39;</span><span class="p">,</span>  <span class="s1">&#39;railway station and london underground station&#39;</span><span class="p">,</span> <span class="s1">&#39;railway station&#39;</span><span class="p">,</span>
            <span class="s1">&#39;london underground station&#39;</span><span class="p">,</span> <span class="s1">&#39;light rapid transit station&#39;</span><span class="p">,</span> <span class="s1">&#39;light rapid transit station and railway station&#39;</span><span class="p">]</span>

<span class="n">utilities</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gas supply&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity supply&#39;</span><span class="p">,</span> <span class="s1">&#39;electricity substation&#39;</span><span class="p">,</span> <span class="s1">&#39;waste treatment building&#39;</span><span class="p">,</span>
            <span class="s1">&#39;water supply&#39;</span><span class="p">,</span> <span class="s1">&#39;waste water treatment plant&#39;</span><span class="p">,</span> <span class="s1">&#39;smokestack&#39;</span><span class="p">,</span> <span class="s1">&#39;supply systems&#39;</span><span class="p">,</span> <span class="s1">&#39;waste management&#39;</span><span class="p">,</span> <span class="s1">&#39;water works&#39;</span><span class="p">,</span>
              <span class="s1">&#39;heating plant&#39;</span><span class="p">,</span> <span class="s1">&#39;boiler house&#39;</span><span class="p">,</span>  <span class="s1">&#39;telecommunication&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;land_use_raw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obstructions</span><span class="p">[</span><span class="s1">&#39;land_use_raw&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">adult_entertainment</span><span class="p">,</span> <span class="n">agriculture</span><span class="p">,</span> <span class="n">attractions</span><span class="p">,</span> <span class="n">business_services</span><span class="p">,</span> <span class="n">commercial</span><span class="p">,</span> <span class="n">culture</span><span class="p">,</span> <span class="n">eating_drinking</span><span class="p">,</span>
       <span class="n">education_research</span><span class="p">,</span> <span class="n">emergency_service</span><span class="p">,</span> <span class="n">general_education</span><span class="p">,</span> <span class="n">hospitality</span><span class="p">,</span> <span class="n">industrial</span><span class="p">,</span> <span class="n">medical_care</span><span class="p">,</span> <span class="n">military_detainment</span><span class="p">,</span>
       <span class="n">other</span><span class="p">,</span> <span class="n">public</span><span class="p">,</span> <span class="n">religious</span><span class="p">,</span> <span class="n">residential</span><span class="p">,</span> <span class="n">social</span><span class="p">,</span> <span class="n">sport</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span> <span class="n">utilities</span><span class="p">]</span>
<span class="n">strings</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;adult_entertainment&#39;</span><span class="p">,</span> <span class="s1">&#39;agriculture&#39;</span><span class="p">,</span> <span class="s1">&#39;attractions&#39;</span><span class="p">,</span> <span class="s1">&#39;business_services&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial&#39;</span><span class="p">,</span> <span class="s1">&#39;culture&#39;</span><span class="p">,</span> <span class="s1">&#39;eating_drinking&#39;</span><span class="p">,</span>
       <span class="s1">&#39;education_research&#39;</span><span class="p">,</span> <span class="s1">&#39;emergency_service&#39;</span><span class="p">,</span> <span class="s1">&#39;general_education&#39;</span><span class="p">,</span> <span class="s1">&#39;hospitality&#39;</span><span class="p">,</span> <span class="s1">&#39;industrial&#39;</span><span class="p">,</span> <span class="s1">&#39;medical_care&#39;</span><span class="p">,</span>
           <span class="s1">&#39;military_detainment&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="s1">&#39;public&#39;</span><span class="p">,</span> <span class="s1">&#39;religious&#39;</span><span class="p">,</span> <span class="s1">&#39;residential&#39;</span><span class="p">,</span> <span class="s1">&#39;social&#39;</span><span class="p">,</span> <span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="s1">&#39;transport&#39;</span><span class="p">,</span> <span class="s1">&#39;utilities&#39;</span><span class="p">]</span>

<span class="n">all_uses</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">categories</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>
<span class="n">land_uses</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">obstructions</span><span class="o">.</span><span class="n">land_use_raw</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">to_categorise</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">land_uses</span> <span class="k">if</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_uses</span><span class="p">]</span>

<span class="c1"># shows existing raw categories to classify</span>
<span class="n">to_categorise</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[]
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># and finally classify</span>
<span class="n">obstructions</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">classify_land_use</span><span class="p">(</span><span class="n">obstructions</span><span class="p">,</span> <span class="s1">&#39;land_use&#39;</span><span class="p">,</span><span class="s1">&#39;land_use_raw&#39;</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">strings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Pragmatic-meaning-computation">
<h3>Pragmatic meaning computation<a class="headerlink" href="#Pragmatic-meaning-computation" title="Link to this heading">#</a></h3>
<p><strong>Computing the pragmatic score and assigning it to ``buildings_gdf``</strong></p>
<p>The pragmatic component is computed on the <code class="docutils literal notranslate"><span class="pre">obstructions</span></code> GeoDataFrame as the measure is based on the adjacent buildings’ land use categories. It is a measure of entropy, or information, for which an unusual land-use category within an area receives higher score. The <code class="docutils literal notranslate"><span class="pre">buffer</span></code> parameter indicates the extension of the area that is used to compute the score of a building, on the basis of its land-use’s frequency.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obstructions</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">pragmatic_score</span><span class="p">(</span><span class="n">obstructions</span><span class="p">,</span> <span class="n">research_radius</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">obstructions</span><span class="p">[[</span><span class="s1">&#39;prag&#39;</span><span class="p">,</span> <span class="s1">&#39;land_use&#39;</span><span class="p">,</span> <span class="s1">&#39;buildingID&#39;</span><span class="p">]],</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s2">&quot;buildingID&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>URBAN DMA Categorisation</strong></p>
<p>The land use can also be cagtegorised into 3 categories see <a class="reference external" href="https://journals.sagepub.com/doi/full/10.1177/0042098018819727">https://journals.sagepub.com/doi/full/10.1177/0042098018819727</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buildings</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">visit</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;adult_entertainment&#39;</span><span class="p">,</span> <span class="s1">&#39;attractions&#39;</span><span class="p">,</span> <span class="s1">&#39;culture&#39;</span><span class="p">,</span> <span class="s1">&#39;eating_drinking&#39;</span><span class="p">,</span> <span class="s1">&#39;sport&#39;</span><span class="p">,</span> <span class="s1">&#39;religious&#39;</span><span class="p">,</span> <span class="s1">&#39;social&#39;</span><span class="p">,</span> <span class="s1">&#39;sport&#39;</span><span class="p">]</span>
<span class="n">work</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;agriculture&#39;</span><span class="p">,</span> <span class="s1">&#39;business_services&#39;</span><span class="p">,</span> <span class="s1">&#39;commercial&#39;</span><span class="p">,</span> <span class="s1">&#39;education_research&#39;</span><span class="p">,</span> <span class="s1">&#39;emergency_service&#39;</span><span class="p">,</span> <span class="s1">&#39;general_education&#39;</span><span class="p">,</span>
        <span class="s1">&#39;industrial&#39;</span><span class="p">,</span><span class="s1">&#39;medical_care&#39;</span><span class="p">,</span> <span class="s1">&#39;military_detainment&#39;</span><span class="p">,</span><span class="s1">&#39;public&#39;</span><span class="p">,</span> <span class="s1">&#39;transport&#39;</span><span class="p">,</span><span class="s1">&#39;utilities&#39;</span><span class="p">]</span>
<span class="n">live</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hospitality&#39;</span><span class="p">,</span> <span class="s1">&#39;residential&#39;</span><span class="p">]</span>

<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">visit</span><span class="p">,</span> <span class="n">work</span><span class="p">,</span> <span class="n">live</span><span class="p">]</span>
<span class="n">strings</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;visit&#39;</span><span class="p">,</span> <span class="s1">&#39;work&#39;</span><span class="p">,</span> <span class="s1">&#39;live&#39;</span><span class="p">]</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">classify_land_use</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="s1">&#39;DMA&#39;</span><span class="p">,</span><span class="s1">&#39;land_use&#39;</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">strings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualising</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LinearSegmentedColormap</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="s1">&#39;gold&#39;</span><span class="p">]</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">LinearSegmentedColormap</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="s1">&#39;cmap&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">))</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">plot_gdf</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">column</span> <span class="o">=</span> <span class="s1">&#39;DMA&#39;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Land use&#39;</span><span class="p">,</span> <span class="n">black_background</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">,</span>
            <span class="n">legend</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Landmarks_Local_Files_42_0.png" src="../_images/notebooks_Landmarks_Local_Files_42_0.png" />
</div>
</div>
</section>
</section>
<section id="Final-scores">
<h2>Final scores<a class="headerlink" href="#Final-scores" title="Link to this heading">#</a></h2>
<section id="Defining-Global-indexes-and-components-weights-and-assigning-the-score">
<h3>Defining Global indexes and components weights and assigning the score<a class="headerlink" href="#Defining-Global-indexes-and-components-weights-and-assigning-the-score" title="Link to this heading">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">global_indexes_weights</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;3dvis&#39;</span><span class="p">:</span> <span class="mf">0.50</span><span class="p">,</span> <span class="s1">&#39;fac&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span> <span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span> <span class="s1">&#39;2dvis&#39;</span><span class="p">:</span><span class="mf">0.30</span><span class="p">,</span> <span class="s1">&#39;neigh&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span> <span class="s1">&#39;road&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">}</span>
<span class="n">global_components_weights</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;vScore&#39;</span><span class="p">:</span> <span class="mf">0.50</span><span class="p">,</span> <span class="s1">&#39;sScore&#39;</span> <span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span> <span class="s1">&#39;cScore&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span> <span class="s1">&#39;pScore&#39;</span><span class="p">:</span> <span class="mf">0.10</span><span class="p">}</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">compute_global_scores</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">global_indexes_weights</span><span class="p">,</span> <span class="n">global_components_weights</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Define-Local-indexes-and-components-weights">
<h3>Define Local indexes and components weights<a class="headerlink" href="#Define-Local-indexes-and-components-weights" title="Link to this heading">#</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">local_indexes_weights</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;3dvis&#39;</span><span class="p">:</span> <span class="mf">0.50</span><span class="p">,</span> <span class="s1">&#39;fac&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span> <span class="s1">&#39;area&#39;</span><span class="p">:</span> <span class="mf">0.40</span><span class="p">,</span> <span class="s1">&#39;2dvis&#39;</span><span class="p">:</span> <span class="mf">0.00</span><span class="p">,</span> <span class="s1">&#39;neigh&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">,</span> <span class="s1">&#39;road&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">}</span>
<span class="n">local_components_weights</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;vScore&#39;</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span> <span class="s1">&#39;sScore&#39;</span> <span class="p">:</span> <span class="mf">0.35</span><span class="p">,</span> <span class="s1">&#39;cScore&#39;</span><span class="p">:</span><span class="mf">0.10</span><span class="p">,</span> <span class="s1">&#39;pScore&#39;</span><span class="p">:</span> <span class="mf">0.30</span><span class="p">}</span>
<span class="n">rescaling_radius</span> <span class="o">=</span> <span class="mi">1000</span>  <span class="c1"># to define the local dimension, choose based on the extent of the case study area</span>
<span class="n">buildings</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">compute_local_scores</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">local_indexes_weights</span><span class="p">,</span> <span class="n">local_components_weights</span><span class="p">,</span> <span class="n">rescaling_radius</span> <span class="o">=</span>
                                    <span class="n">rescaling_radius</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Visualisation of the Components</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sScore_sc&#39;</span><span class="p">,</span> <span class="s1">&#39;vScore_sc&#39;</span><span class="p">,</span> <span class="s1">&#39;pScore&#39;</span><span class="p">,</span> <span class="s1">&#39;cScore&#39;</span><span class="p">]</span>
<span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Structural Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Visual Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Pragmatic Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Cultural Score&#39;</span><span class="p">]</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">plot_grid_gdf_columns</span><span class="p">(</span><span class="n">gdf</span> <span class="o">=</span> <span class="n">buildings</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span><span class="p">,</span> <span class="n">titles</span> <span class="o">=</span> <span class="n">titles</span><span class="p">,</span> <span class="n">black_background</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
                  <span class="n">scheme</span> <span class="o">=</span> <span class="s1">&#39;fisher_jenks&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;magma&#39;</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Landmarks_Local_Files_49_0.png" src="../_images/notebooks_Landmarks_Local_Files_49_0.png" />
</div>
</div>
<p><strong>Visualisation of the Global and Local Landmark Scores</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gScore_sc&#39;</span><span class="p">,</span> <span class="s1">&#39;lScore_sc&#39;</span><span class="p">]</span>
<span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Global Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Local Score&#39;</span><span class="p">]</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">ci</span><span class="o">.</span><span class="n">plot_grid_gdf_columns</span><span class="p">(</span><span class="n">gdf</span> <span class="o">=</span> <span class="n">buildings</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span><span class="p">,</span> <span class="n">titles</span> <span class="o">=</span> <span class="n">titles</span><span class="p">,</span> <span class="n">black_background</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
                  <span class="n">scheme</span> <span class="o">=</span> <span class="s1">&#39;fisher_jenks&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;magma&#39;</span><span class="p">,</span> <span class="n">cbar</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_Landmarks_Local_Files_51_0.png" src="../_images/notebooks_Landmarks_Local_Files_51_0.png" />
</div>
</div>
<p><strong>Exporting</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sight_lines</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">output_path</span><span class="o">+</span><span class="s1">&#39;_sight_lines.gpkg&#39;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GPKG&#39;</span><span class="p">)</span>
<span class="n">buildings</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">output_path</span><span class="o">+</span><span class="s1">&#39;_landmarks.gpkg&#39;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s1">&#39;GPKG&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script></section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Loading-the-Layers">Loading the Layers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Defining-the-Layers">Defining the Layers</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Option-1">Option 1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Option-2">Option 2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Option-3">Option 3</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Structural-component">Structural component</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Visual-component">Visual component</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Sight-Lines-Construction">Sight Lines Construction</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Cultural-component">Cultural component</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Pragmatic-component">Pragmatic component</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Pragmatic-meaning-computation">Pragmatic meaning computation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Final-scores">Final scores</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Defining-Global-indexes-and-components-weights-and-assigning-the-score">Defining Global indexes and components weights and assigning the score</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Define-Local-indexes-and-components-weights">Define Local indexes and components weights</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/notebooks/Landmarks_Local_Files.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, Gabriele Filomena.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.5.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>